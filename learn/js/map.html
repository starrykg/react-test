<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
<h1>hello world</h1>
<div id = "root"></div>
<script>
    var myMap = new Map();
    myMap.set(0, "zero");
    myMap.set(1, "one");

    // 将会显示两个 log。 一个是 "0 = zero" 另一个是 "1 = one"
    for (var [key, value] of myMap) {
        console.log(key + " = " + value);
    }
    for (var [key, value] of myMap.entries()) {
        console.log(key + " = " + value);
    }
    /* 这个 entries 方法返回一个新的 Iterator 对象，它按插入顺序包含了 Map 对象中每个元素的 [key, value] 数组。 */

    // 将会显示两个log。 一个是 "0" 另一个是 "1"
    for (var key of myMap.keys()) {
        console.log(key);
    }
    /* 这个 keys 方法返回一个新的 Iterator 对象， 它按插入顺序包含了 Map 对象中每个元素的键。 */

    // 将会显示两个log。 一个是 "zero" 另一个是 "one"
    for (var value of myMap.values()) {
        console.log(value);
    }
    /* 这个 values 方法返回一个新的 Iterator 对象，它按插入顺序包含了 Map 对象中每个元素的值。 */


    var myMap = new Map();
    myMap.set(0, "zero");
    myMap.set(1, "one");

    // 将会显示两个 logs。 一个是 "0 = zero" 另一个是 "1 = one"
    //注意：value在前     forEach(callbackfn: (value: V, key: K, map: Map<K, V>) => void, thisArg?: any): void;
    myMap.forEach(function (value, key){
        console.log(key + " = " + value)
    })

    //Map 与 Array的转换
    var kvArray = [["key1", "value1"], ["key2", "value2"]];

    // Map 构造函数可以将一个 二维 键值对数组转换成一个 Map 对象
    var myMap = new Map(kvArray);
    console.log( "myMap",myMap)
    // 使用 Array.from 函数可以将一个 Map 对象转换成一个二维键值对数组
    var outArray = Array.from(myMap);
    console.log( "outArray",outArray)


    var myMap1 = new Map([["key1", "value1"], ["key2", "value2"]]);
    var myMap2 = new Map(myMap1);

    console.log(myMap1 === myMap2);//false
    // 打印 false。 Map 对象构造函数生成实例，迭代出新的对象。

    var first = new Map([[1, 'one'], [2, 'two'], [3, 'three'],]);
    var second = new Map([[1, 'uno'], [2, 'dos']]);

    // 合并两个 Map 对象时，如果有重复的键值，则后面的会覆盖前面的，对应值即 uno，dos， three
    var merged = new Map([...first, ...second]);

    console.log("merged=",merged);//{1 => 'uno', 2 => 'dos', 3 => 'three'}

    //set
    let mySet = new Set();

    mySet.add(1); // Set(1) {1}
    mySet.add(5); // Set(2) {1, 5}
    mySet.add(5); // Set(2) {1, 5} 这里体现了值的唯一性
    mySet.add("some text");
    console.log("mySet=",mySet);
    // Set(3) {1, 5, "some text"} 这里体现了类型的多样性
    var o = {a: 1, b: 2};
    mySet.add(o);
    mySet.add({a: 1, b: 2});
    // Set(5) {1, 5, "some text", {…}, {…}}
    // 这里体现了对象之间引用不同不恒等，即使值相同，Set 也能存储
    console.log("mySet=",mySet);

    // Array 转 Set
    var mySet1 = new Set(["value1", "value2", "value3"]);
    // 用...操作符，将 Set 转 Array
    var myArray = [...mySet1];
    console.log("myArray=",myArray);
    String
    // String 转 Set
    var mySet1 = new Set('hello');  // Set(4) {"h", "e", "l", "o"}
    // 注：Set 中 toString 方法是不能将 Set 转换成 String
    console.log("mySet1=",mySet1);//{'h', 'e', 'l', 'o'}

    //set去重复
    var mySet2 = new Set([1, 2, 3, 4, 4]);
    console.log("mySet2=",mySet2);//{1, 2, 3, 4}
    [...mySet2]; // [1, 2, 3, 4]
    console.log("mySet2=",mySet2);//{1, 2, 3, 4}

    //set并集
    var a = new Set([1, 2, 3]);
    var b = new Set([4, 3, 2]);
    var union = new Set([...a, ...b]); // {1, 2, 3, 4}
    console.log("union=",union);//{1, 2, 3, 4}

    //set差集
    var a = new Set([1, 2, 3]);
    var b = new Set([4, 3, 2]);
    var difference = new Set([...a].filter(x => !b.has(x))); // {1}
    console.log("========",x => !b.has(x));//x => !b.has(x)
    console.log("difference=",difference);//{1}

/*  => 则是一种简写方法。

    x => x * x
    相当于：

    function(x){return x*x}
    所以 x => b.has(x) 本质是一个函数相当于 function(x){return b.has（x)}。*/

    let nums = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
    let res = nums.filter((num) => {
        return num > 5;
    });
    console.log("res=",res);  // [6, 7, 8, 9, 10]

    var a = new Set([1, 2, 3]);
    var b = new Set([4, 3, 2]);
    var difference =new Set([...[...a].filter(x => !b.has(x)),...[...b].filter(x => !a.has(x))]); // {1,4}
    console.log("difference=",difference);
    //[...a] 就是将 set 转换成 array
    var as = new Set([...[...a].filter(x => !b.has(x))]);//1
    var ac = new Set([...[...b].filter(x => !a.has(x))]);//4
    console.log("as=",as);
    console.log("ac=",ac);

    var a = new Set([1, 2, 3]);
    var b = new Set([4, 3, 2]);
    var arr = [...a];            //将a转换成数组
    var fArr = arr.filter(function(x){    //使用filter过滤数组，并将新数组返回到fArr
        return !b.has(x);        //判断b中是否含有a中的元素，没有则返回false
    })
    var intersect = new Set(fArr);          //将fArr转换成set
    console.log("fArr=",fArr);

</script>
</body>
</html>
